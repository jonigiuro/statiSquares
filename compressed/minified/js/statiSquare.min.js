(function(e){function t(e,t){if(e=="random"){var n="0123456789ABCDEF".split("");var r="#";for(var i=0;i<6;i++){r+=n[Math.round(Math.random()*15)]}return r}else if(e=="aurora"){var s=["#011526","#025959","#027353","#03a678","#03a696"]}else if(e=="bird"){var s=["#b0d9d5","#f2e6c2","#d9bf8f","#734636","#591b0c"]}else if(e=="goldfish"){var s=["#f2c6a0","#f2b705","#f28705","#f22613","#a60303"]}else if(e=="sepia"){var s=["#ebe7b6","#dec984","#ad9461","#503e28","#3b2d1e"]}else if(e=="bright"){var s=["#fc1209","#fab035","#ffdd00","#c2d730","#00a3e4"]}else if(e=="custom"){return false}r=s[t%s.length];return r}e.fn.statiSquare=function(n,r){var i=e.extend({width:400,height:200,responsive:false,hasValue:false,type:"blocks",theme:"random",sort:"ascendant",strokeWidth:10},n);var s={init:function(){var n=e(this);var r=e(this).find(".statiSquare-value");var s=new Array;var o=0;n.find(".statiSquare-value").each(function(){value=parseInt(e(this).html().replace("%",""));o+=value;s.push(value)});if(o!=100){for(var u=0;u<s.length;u++){s[u]=Math.round(s[u]/o*100)}}if(i.sort=="descendant"){for(var u=0;u<s.length;u++){s.sort().reverse()}}else if(i.sort=="ascendant"){for(var u=0;u<s.length;u++){s.sort()}}r.remove();if(i.responsive){n.css("width","100%");n.append("<div class='statiSquare-single'></div>").css({width:"100%",height:i.height})}else{if(i.type!="ring"&&i.type!="pie"){n.css("width",i.width);n.append("<div class='statiSquare-single'></div>").css({width:i.width,height:i.height})}else{n.css("width",i.width);n.append("<div class='statiSquare-single'></div>").css({width:i.width,height:i.width})}}var a=n.find(".statiSquare-single");if(i.type=="blocks"){for(var u=0;u<100;u++){a.append("<div class='block'></div>")}var f=n.find(".block");var l=0;for(var c=0;c<s.length;c++){var h=t(i.theme,c);for(var u=l;u<s[c]+l;u++){e(f[u]).addClass("active value-"+s[c]);e(f[u]).css("background-color",h)}l+=s[c]}if(i.responsive){f.css({width:"10%"})}else{f.css({width:i.width/10})}f.css({height:i.height/10})}else if(i.type=="map"){var p=0;var d=0;if(i.responsive){var v=100}else{var v=100}var m=i.height;n.css("height",m);for(var u=0;u<s.length;u++){if(i.hasValue){a.append("<div class='statiSquare-map'><span class='value-label'>"+s[u]+"%</span></div>")}else{a.append("<div class='statiSquare-map'></div>")}var g=e(".statiSquare-map").last();g.css("background-color",t(i.theme,u));o-=s[u];var y=v*s[u];if(u%2==0){g.css({top:d+"%",left:p+"%",width:y/(v-d)+"%",height:v-d+"%"});p+=y/(v-d)}else{g.css({top:d+"%",left:p+"%",width:v-p+"%",height:y/(v-p)+"%"});d+=y/(v-p)}}}else if(i.type=="bars"){for(var u=0;u<s.length;u++){if(i.hasValue){a.append("<div class='statiSquare-bars'><span class='value-label'>"+s[u]+"%</span></div>")}else{a.append("<div class='statiSquare-bars'></div>")}if(i.responsive){e(".statiSquare-bars").last().css({width:s[u]+"%"})}else{e(".statiSquare-bars").last().css({width:i.width/100*s[u]})}e(".statiSquare-bars").last().css({height:i.height,"background-color":t(i.theme,u)})}}else if(i.type=="pie"){var b=document.createElement("canvas");b.height=i.width;b.width=i.width;a.append(b);var w=b.getContext("2d");var E=0;var S=function(e,t,n){w.save();var r=x(e);var s=Math.floor(b.width/2);var o=Math.floor(b.height/2);var u=r;var a=E+u;var f=i.width/2;w.lineWidth=0;w.beginPath();w.moveTo(s,o);w.arc(s,o,f,E,a,false);w.fillStyle=t;w.fill();E+=r;w.restore()};var x=function(e){var t=360/100*e;var n=t*.0174532925;return n};for(var u=0;u<s.length;u++){var h=t(i.theme,u);S(s[u],h)}}else if(i.type=="ring"){var b=document.createElement("canvas");b.height=i.width;b.width=i.width;a.append(b);var w=b.getContext("2d");var E=0;var S=function(e,t){w.save();var n=x(e);var r=Math.floor(b.width/2);var s=Math.floor(b.height/2);var o=i.width/2;var u=n;var a=E+u;w.lineWidth=i.strokeWidth;w.beginPath();w.arc(r,s,o-i.strokeWidth/2,E,a,false);w.lineWidth=i.strokeWidth;w.strokeStyle=t;w.stroke();w.fillStyle=t;E+=n;w.restore()};var x=function(e){var t=360/100*e;var n=t*.0174532925;return n};for(var u=0;u<s.length;u++){var h=t(i.theme,u);S(s[u],h)}}}};return this.each(function(){if(s[r]){return s[r].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof r==="object"||!r){return s.init.apply(this,arguments)}else{e.error("Method "+r+" does not exist on jQuery.statiSquare")}})}})(jQuery)