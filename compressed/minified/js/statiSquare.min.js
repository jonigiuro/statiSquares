(function(e){function t(e,t){if(e=="random"){var n="0123456789ABCDEF".split("");var r="#";for(var i=0;i<6;i++){r+=n[Math.round(Math.random()*15)]}return r}else if(e=="aurora"){var s=["#011526","#025959","#027353","#03a678","#03a696"]}else if(e=="bird"){var s=["#b0d9d5","#f2e6c2","#d9bf8f","#734636","#591b0c"]}else if(e=="goldfish"){var s=["#f2c6a0","#f2b705","#f28705","#f22613","#a60303"]}else if(e=="sepia"){var s=["#ebe7b6","#dec984","#ad9461","#503e28","#3b2d1e"]}else if(e=="bright"){var s=["#fc1209","#fab035","#ffdd00","#c2d730","#00a3e4"]}else if(e=="custom"){return false}r=s[t%s.length];return r}e.fn.statiSquare=function(n,r){var i=e.extend({width:150,hasValue:false,type:"dots",theme:"random",sort:"ascendant"},n);var s={init:function(){var n=e(this);var r=e(this).find(".value");var s=new Array;var o=0;n.find(".value").each(function(){value=parseInt(e(this).html().replace("%",""));o+=value;s.push(value)});if(o!=100){for(var u=0;u<s.length;u++){s[u]=Math.round(s[u]/o*100)}}if(i.sort=="ascendant"){for(var u=0;u<s.length;u++){s.sort().reverse()}}else if(i.sort=="descendant"){for(var u=0;u<s.length;u++){s.sort()}}r.remove();n.css("width",i.width);n.append("<div class='statiSquare-single'></div>").css("width",i.width);var a=n.find(".statiSquare-single");if(i.type=="dots"){for(var u=0;u<100;u++){a.append("<div class='block'></div>")}var f=n.find(".block");var l=0;for(var c=0;c<s.length;c++){var h=t(i.theme,c);for(var u=l;u<s[c]+l;u++){e(f[u]).addClass("active value-"+s[c]);e(f[u]).css("background-color",h)}l+=s[c]}f.css({width:i.width/10,height:i.width/10})}else if(i.type=="map"){var p=0;var d=0;var o=100;var v=i.width;n.css("height",i.width);for(var u=0;u<s.length;u++){if(i.hasValue){a.append("<div class='statiSquare-map'><span class='value-label'>"+s[u]+"%</span></div>")}else{a.append("<div class='statiSquare-map'></div>")}var m=e(".statiSquare-map").last();m.css("background-color",t(i.theme,u));var g=v*v/100*s[u];o-=s[u];if(u%2==0){m.css({top:d,left:p,width:g/(v-d),height:v-d});p+=g/(v-d)}else{m.css({top:d,left:p,width:v-p,height:g/(v-p)});d+=g/(v-p)}}}else if(i.type=="bars"){for(var u=0;u<s.length;u++){if(i.hasValue){a.append("<div class='statiSquare-bars'><span class='value-label'>"+s[u]+"%</span></div>")}else{a.append("<div class='statiSquare-bars'></div>")}e(".statiSquare-bars").last().css({width:i.width/100*s[u],height:i.width,"background-color":t(i.theme,u)})}}else if(i.type=="pie"||i.type=="ring"){var y=document.createElement("canvas");y.height=i.width;y.width=i.width;a.append(y);var b=y.getContext("2d");var w=0;var E=function(e,t,n){b.save();var r=S(e);var i=Math.floor(y.width/2);var s=Math.floor(y.height/2);if(n){radius=Math.floor(y.width/2/100*70)}else{radius=Math.floor(y.width/2)}var o=r;var u=w+o;b.beginPath();b.moveTo(i,s);b.arc(i,s,radius,w,u,false);b.closePath();b.fillStyle=t;b.fill();w+=r;b.restore()};var S=function(e){var t=360/100*e;var n=t*.0174532925;return n};for(var u=0;u<s.length;u++){var h=t(i.theme,u);E(s[u],h)}if(i.type=="ring"){E(100,"#FFFFFF",true)}}}};return this.each(function(){if(s[r]){return s[r].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof r==="object"||!r){return s.init.apply(this,arguments)}else{e.error("Method "+r+" does not exist on jQuery.statiSquare")}})}})(jQuery)